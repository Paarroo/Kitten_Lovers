<!-- app/views/devise/sessions/new.html.erb -->
<div class="auth-container">
  <div class="auth-card">

    <div class="auth-header">
      <span class="auth-emoji">üê±</span>
      <h1 class="auth-title">Bienvenue</h1>
      <p class="auth-subtitle">Connectez-vous :</p>
    </div>

    <%= form_with(model: resource,
                  as: resource_name,
                  url: session_path(resource_name),
                  data: {
                    controller: "auth",
                    auth_target: "loginForm"
                  },
                  local: true,
                  class: "auth-form") do |f| %>

      <% if notice %>
        <div class="auth-notice" data-auth-target="notice">
          <p><%= notice %></p>
        </div>
      <% end %>

      <% if alert %>
        <div class="auth-errors" data-auth-target="errors">
          <p><%= alert %></p>
        </div>
      <% end %>

      <% if resource.errors.any? %>
        <div class="auth-errors" data-auth-target="errors">
          <% resource.errors.full_messages.each do |message| %>
            <p><%= message %></p>
          <% end %>
        </div>
      <% end %>

      <%= f.email_field :email,
                       autofocus: true,
                       autocomplete: "email",
                       placeholder: "Email",
                       data: {
                         auth_target: "emailInput",
                         action: "input->auth#validateEmail"
                       },
                       class: "auth-input" %>

      <%= f.password_field :password,
                          autocomplete: "current-password",
                          placeholder: "Password",
                          data: {
                            auth_target: "passwordInput",
                            action: "input->auth#validatePassword"
                          },
                          class: "auth-input" %>

      <%= f.submit "Se connecter",
                  data: {
                    auth_target: "submitButton",
                    action: "click->auth#submitLoginForm"
                  },
                  class: "auth-button" %>

      <%= link_to "Mot de passe oubli√© ?",
                 new_password_path(resource_name),
                 class: "auth-link" %>

    <% end %>

    <div class="auth-checkbox-container">
      <%= check_box_tag :remember_me, "1", true,
                        { class: "auth-checkbox",
                          data: { auth_target: "rememberCheck" } } %>
      <%= label_tag :remember_me, "Rester connect√©",
                    class: "auth-checkbox-label" %>
    </div>

    <div class="auth-bottom">
      <p style="margin: 0; font-size: 0.8rem; color: #6b7280;">
        Pas encore de compte ?
        <%= link_to "S'inscrire",
                   new_registration_path(resource_name),
                   class: "auth-secondary-link" %>
      </p>

      <%= link_to "Retour √† l'accueil",
                 root_path,
                 class: "auth-back-button" %>
    </div>
  </div>
</div>
