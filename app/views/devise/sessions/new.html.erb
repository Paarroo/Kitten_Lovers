<div class="auth-container">
  <div class="auth-card">

    <!-- Header section with cat emoji and welcome text -->
    <div class="auth-header">
      <span class="auth-emoji">üê±</span>
      <h1 class="auth-title">Bienvenue</h1>
      <p class="auth-subtitle">Connectez-vous :</p>
    </div>

    <!-- Error and notice messages -->
    <% if notice %>
      <div class="alert alert-success alert-dismissible fade show" role="alert" data-sessions-target="notice">
        <%= notice %>
        <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
      </div>
    <% end %>

    <% if alert %>
      <div class="alert alert-danger alert-dismissible fade show" role="alert" data-sessions-target="alert">
        <%= alert %>
        <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
      </div>
    <% end %>

    <% if resource.errors.any? %>
      <div class="alert alert-danger" role="alert" data-sessions-target="errors">
        <% resource.errors.full_messages.each do |message| %>
          <p class="mb-0"><%= message %></p>
        <% end %>
      </div>
    <% end %>

    <!-- Login form with Stimulus controller -->
    <%= form_with(model: resource,
                  as: resource_name,
                  url: session_path(resource_name),
                  data: {
                    controller: "sessions",
                    sessions_target: "loginForm"
                  },
                  local: true,
                  class: "auth-form") do |f| %>

      <!-- Email input field -->
      <%= f.email_field :email,
                       autofocus: true,
                       autocomplete: "email",
                       placeholder: "Email",
                       data: {
                         sessions_target: "emailInput",
                         action: "input->sessions#validateEmail"
                       },
                       class: "auth-input" %>

      <!-- Password input field -->
      <%= f.password_field :password,
                          autocomplete: "current-password",
                          placeholder: "Password",
                          data: {
                            sessions_target: "passwordInput",
                            action: "input->sessions#validatePassword"
                          },
                          class: "auth-input" %>

      <!-- Submit button -->
      <%= f.submit "Se connecter",
                  data: {
                    sessions_target: "submitButton",
                    action: "click->sessions#submitLoginForm"
                  },
                  class: "auth-button" %>

      <!-- Forgot password link -->
      <%= link_to "Mot de passe oubli√© ?",
                 new_password_path(resource_name),
                 class: "auth-link" %>

    <% end %>

    <!-- Remember me checkbox -->
    <div class="auth-checkbox-container">
      <%= check_box_tag :remember_me, "1", true,
                        { class: "auth-checkbox",
                          data: { sessions_target: "rememberCheck" } } %>
      <%= label_tag :remember_me, "Rester connect√©",
                    class: "auth-checkbox-label" %>
    </div>

    <!-- Bottom navigation links -->
    <div class="auth-bottom">
      <p style="margin: 0; font-size: 0.8rem; color: #6b7280;">
        Pas encore de compte ?
        <%= link_to "S'inscrire",
                   new_registration_path(resource_name),
                   class: "auth-secondary-link" %>
      </p>

      <%= link_to "Retour √† l'accueil",
                 root_path,
                 class: "auth-back-button" %>
    </div>
  </div>
</div>

<!-- Include external CSS file -->
<%= stylesheet_link_tag 'devise/sessions', 'data-turbo-track': 'reload' %>
