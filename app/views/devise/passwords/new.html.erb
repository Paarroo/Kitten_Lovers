<div class="auth-container">
  <div class="auth-card">

    <!-- Header section with cat emoji and forgot password text -->
    <div class="auth-header">
      <span class="auth-emoji">🐱</span>
      <h1 class="auth-title">Mot de passe oublié ?</h1>
      <p class="auth-subtitle">Entrez votre email pour recevoir un lien de réinitialisation</p>
    </div>

    <!-- Error and notice messages -->
    <% if notice %>
      <div class="alert alert-success alert-dismissible fade show" role="alert" data-passwords-target="notice">
        <%= notice %>
        <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
      </div>
    <% end %>

    <% if alert %>
      <div class="alert alert-danger alert-dismissible fade show" role="alert" data-passwords-target="alert">
        <%= alert %>
        <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
      </div>
    <% end %>

    <% if resource.errors.any? %>
      <div class="alert alert-danger" role="alert" data-passwords-target="errors">
        <% resource.errors.full_messages.each do |message| %>
          <p class="mb-0"><%= message %></p>
        <% end %>
      </div>
    <% end %>

    <!-- Password reset form with Stimulus controller -->
    <%= form_with(model: resource,
                  as: resource_name,
                  url: password_path(resource_name),
                  html: { method: :post },
                  data: {
                    controller: "passwords",
                    passwords_target: "resetForm"
                  },
                  local: true,
                  class: "auth-form") do |f| %>

      <!-- Email input field -->
      <%= f.email_field :email,
                       autofocus: true,
                       autocomplete: "email",
                       placeholder: "Votre adresse email",
                       data: {
                         passwords_target: "emailInput",
                         action: "input->passwords#validateEmail"
                       },
                       class: "auth-input" %>

      <!-- Submit button -->
      <%= f.submit "Envoyer le lien de réinitialisation",
                  data: {
                    passwords_target: "submitButton",
                    action: "click->passwords#submitResetForm"
                  },
                  class: "auth-button" %>

    <% end %>

    <!-- Help text -->
    <div class="auth-help-text">
      <p>Vous recevrez un email avec des instructions pour réinitialiser votre mot de passe dans quelques minutes.</p>
    </div>

    <!-- Bottom navigation links -->
    <div class="auth-bottom">
      <div class="auth-navigation-links">
        <%= link_to "Retour à la connexion",
                   new_session_path(resource_name),
                   class: "auth-secondary-link" %>

        <span class="auth-separator">•</span>

        <%= link_to "Créer un compte",
                   new_registration_path(resource_name),
                   class: "auth-secondary-link" %>
      </div>

      <%= link_to "Retour à l'accueil",
                 root_path,
                 class: "auth-back-button" %>
    </div>
  </div>
</div>

<!-- Include external CSS file -->
<%= stylesheet_link_tag 'devise/passwords', 'data-turbo-track': 'reload' %>
