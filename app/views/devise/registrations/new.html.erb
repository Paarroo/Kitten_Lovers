<div class="auth-container">
  <div class="auth-card">

    <!-- Header section with cat emoji and welcome text -->
    <div class="auth-header">
      <span class="auth-emoji">üê±</span>
      <h1 class="auth-title">Bienvenue</h1>
      <p class="auth-subtitle">Connectez-vous :</p>
    </div>

    <!-- Error and notice messages -->
    <% if notice %>
      <div class="alert alert-success alert-dismissible fade show" role="alert"
           data-registrations-target="notice" id="notice-alert">
        <%= notice %>
        <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
      </div>
    <% end %>

    <% if alert %>
      <div class="alert alert-danger alert-dismissible fade show" role="alert"
           data-registrations-target="alert" id="alert-message">
        <%= alert %>
        <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
      </div>
    <% end %>

    <% if resource.errors.any? %>
      <div class="alert alert-danger" role="alert"
           data-registrations-target="errors" id="form-errors">
        <% resource.errors.full_messages.each do |message| %>
          <p class="mb-0"><%= message %></p>
        <% end %>
      </div>
    <% end %>

    <!-- Registration form with Stimulus controller -->
    <%= form_with(model: resource,
                  as: resource_name,
                  url: registration_path(resource_name),
                  data: {
                    controller: "registrations"
                  },
                  local: true,
                  class: "auth-form") do |f| %>

      <!-- Email input field -->
      <%= f.email_field :email,
                       autofocus: true,
                       autocomplete: "email",
                       placeholder: "Email",
                       data: {
                         "registrations-target": "emailInput",
                         "action": "input->registrations#validateEmail"
                       },
                       class: "auth-input" %>

      <!-- Password input field -->
      <%= f.password_field :password,
                          autocomplete: "new-password",
                          placeholder: "Password",
                          data: {
                            "registrations-target": "passwordInput",
                            "action": "input->registrations#validatePassword"
                          },
                          class: "auth-input" %>

      <!-- Password confirmation field -->
      <%= f.password_field :password_confirmation,
                          autocomplete: "new-password",
                          placeholder: "Password confirmation",
                          data: {
                            "registrations-target": "passwordConfirmationInput",
                            "action": "input->registrations#validatePasswordConfirmation"
                          },
                          class: "auth-input" %>

      <!-- Submit button -->
      <%= f.submit "S'inscrire",
                  data: {
                    "registrations-target": "submitButton",
                    "action": "click->registrations#submitSignupForm"
                  },
                  class: "auth-button" %>

      <!-- Forgot password link -->
      <%= link_to "Mot de passe oubli√© ?",
                 new_password_path(resource_name),
                 class: "auth-link" %>

    <% end %>

    <!-- Remember me checkbox -->
    <div class="auth-checkbox-container">
      <%= check_box_tag :remember_me, "1", true,
                        { class: "auth-checkbox",
                          data: { "registrations-target": "rememberCheck" } } %>
      <%= label_tag :remember_me, "Rester connect√©",
                    class: "auth-checkbox-label" %>
    </div>

    <!-- Bottom navigation links -->
    <div class="auth-bottom">
      <p style="margin: 0; font-size: 0.8rem; color: #6b7280;">
        D√©j√† un compte ?
        <%= link_to "Se connecter",
                   new_session_path(resource_name),
                   class: "auth-secondary-link" %>
      </p>

      <%= link_to "Retour √† l'accueil",
                 root_path,
                 class: "auth-back-button" %>
    </div>
  </div>
</div>

<!-- Include external CSS file -->
<%= stylesheet_link_tag 'devise/registrations', 'data-turbo-track': 'reload' %>
